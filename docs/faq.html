<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>13. Часто задаваемые вопросы | Документация торговых роботов компании &quot;Викинг&quot;</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/github-markdown-css/2.2.1/github-markdown.css">
    <link rel="icon" href="/bot-doc/favicon.ico">
    <meta name="description" content="Руководство пользователя, описание алгоритма и API">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/bot-doc/assets/css/0.styles.1bc2eb42.css" as="style"><link rel="preload" href="/bot-doc/assets/js/app.95e2cffb.js" as="script"><link rel="preload" href="/bot-doc/assets/js/2.78e0eb71.js" as="script"><link rel="preload" href="/bot-doc/assets/js/1.1350850d.js" as="script"><link rel="preload" href="/bot-doc/assets/js/33.57fcb805.js" as="script"><link rel="preload" href="/bot-doc/assets/js/21.7f568b35.js" as="script"><link rel="prefetch" href="/bot-doc/assets/js/10.e460e884.js"><link rel="prefetch" href="/bot-doc/assets/js/11.fa90c2bd.js"><link rel="prefetch" href="/bot-doc/assets/js/12.6c10cead.js"><link rel="prefetch" href="/bot-doc/assets/js/13.aa368e90.js"><link rel="prefetch" href="/bot-doc/assets/js/14.d8197df5.js"><link rel="prefetch" href="/bot-doc/assets/js/15.dff8d592.js"><link rel="prefetch" href="/bot-doc/assets/js/16.e3d4bcac.js"><link rel="prefetch" href="/bot-doc/assets/js/17.0f4cd835.js"><link rel="prefetch" href="/bot-doc/assets/js/18.de88b01a.js"><link rel="prefetch" href="/bot-doc/assets/js/19.494ffbf1.js"><link rel="prefetch" href="/bot-doc/assets/js/20.93a09c68.js"><link rel="prefetch" href="/bot-doc/assets/js/22.5d9553a1.js"><link rel="prefetch" href="/bot-doc/assets/js/23.2354ca82.js"><link rel="prefetch" href="/bot-doc/assets/js/24.cc592321.js"><link rel="prefetch" href="/bot-doc/assets/js/25.431a4c01.js"><link rel="prefetch" href="/bot-doc/assets/js/26.e46c4eb2.js"><link rel="prefetch" href="/bot-doc/assets/js/27.49c88f93.js"><link rel="prefetch" href="/bot-doc/assets/js/28.a7a30783.js"><link rel="prefetch" href="/bot-doc/assets/js/29.fb7194ea.js"><link rel="prefetch" href="/bot-doc/assets/js/3.22f84ccd.js"><link rel="prefetch" href="/bot-doc/assets/js/30.b7ce93ae.js"><link rel="prefetch" href="/bot-doc/assets/js/31.0ca21add.js"><link rel="prefetch" href="/bot-doc/assets/js/32.026f9a3d.js"><link rel="prefetch" href="/bot-doc/assets/js/34.3b048059.js"><link rel="prefetch" href="/bot-doc/assets/js/35.5e5ddd82.js"><link rel="prefetch" href="/bot-doc/assets/js/36.4038b2ba.js"><link rel="prefetch" href="/bot-doc/assets/js/4.05e2d957.js"><link rel="prefetch" href="/bot-doc/assets/js/5.8b885637.js"><link rel="prefetch" href="/bot-doc/assets/js/6.54e4293e.js"><link rel="prefetch" href="/bot-doc/assets/js/7.cad5c010.js"><link rel="prefetch" href="/bot-doc/assets/js/vendors~docsearch.d8b3a8c6.js">
    <link rel="stylesheet" href="/bot-doc/assets/css/0.styles.1bc2eb42.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bot-doc/" class="home-link router-link-active"><img src="/bot-doc/images/vkg_logo.svg" alt="Документация торговых роботов компании &quot;Викинг&quot;" class="logo"> <span class="site-name can-hide">Документация торговых роботов компании &quot;Викинг&quot;</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bot-doc/docs/introduction.html" class="nav-link">
  Документация
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bot-doc/docs/introduction.html" class="nav-link">
  Документация
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bot-doc/docs/change-history.html" class="sidebar-link">1. История изменений</a></li><li><a href="/bot-doc/docs/introduction.html" class="sidebar-link">2. О платформе</a></li><li><a href="/bot-doc/docs/interface.html" class="sidebar-link">3. Интерфейс сайта</a></li><li><a href="/bot-doc/docs/getting-started.html" class="sidebar-link">4. Начало работы</a></li><li><a href="/bot-doc/docs/stable-work.html" class="sidebar-link">5. Обеспечение обратной связи</a></li><li><a href="/bot-doc/docs/creating-connection.html" class="sidebar-link">6. Добавление подключений</a></li><li><a href="/bot-doc/docs/params-description.html" class="sidebar-link">7. Описание параметров</a></li><li><a href="/bot-doc/docs/algorithm-comments.html" class="sidebar-link">8. Примечания к алгоритму</a></li><li><a href="/bot-doc/docs/order-error.html" class="sidebar-link">9. Ошибки выставления, снятия и изменения заявок</a></li><li><a href="/bot-doc/docs/c-api.html" class="sidebar-link">10. Формулы на языке программирования C++</a></li><li><a href="/bot-doc/docs/api.html" class="sidebar-link">11. WebSocket API</a></li><li><a href="/bot-doc/docs/comparison.html" class="sidebar-link">12. Сравнение C++ формул и WebSocket API</a></li><li><a href="/bot-doc/docs/faq.html" aria-current="page" class="active sidebar-link">13. Часто задаваемые вопросы</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="часто-задаваемые-вопросы" tabindex="-1"><a href="#часто-задаваемые-вопросы" class="header-anchor">#</a> <div class="anchor-container"><span id="chasto-zadavaemie-voprosi" class="anchor-target"></span> <a href="#chasto-zadavaemie-voprosi" title="Копировать ссылку" class="anchor-link">#</a></div> Часто задаваемые вопросы</h1> <ul><li><details><summary><i>Проблема с торговым подключением к бирже: робот не выставляет заявки/не видит сделки, но ситуация не позволяет надолго остановить торговлю.<div class="anchor-container"><span id="faq.lost_orders" class="anchor-target"></span> <a href="#faq.lost_orders" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <ol><li>Напишите письмо в поддержку с описанием проблемы;</li> <li>Выключите торговлю по всем портфелям, торгующим через данное транзакционное подключение, убедитесь, что не осталось активных заявок;</li> <li>Сбросьте статусы заявок по всем портфелям из пункта 2. Функционал <code>Reset statuses</code> описан <a href="/bot-doc/docs/getting-started.html#portfolio_actions.reset_statuses">тут</a>;</li> <li>Преподключите проблемное транзакционное подключение;</li> <li>Включите торговлю по портфелям из пункта 2;</li> <li>Если в течении пары часов проблема повторится, то выключите торговлю по всем портфелям, торгующим через данное транзакционное подключение, и больше не включайте, пока не получите ответ от поддержки.</li></ol></details></li></ul> <hr> <ul><li><details><summary><i>Торговля включается и выключается самопроизвольно. С чем это связано?<div class="anchor-container"><span id="faq.timetable" class="anchor-target"></span> <a href="#faq.timetable" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Скорее всего задано расписание для торговли или специально задано такое поведение в формулах.</p></details></li></ul> <hr> <ul><li><details><summary><i>Робот не торгует. Практически все подключения отключены. В чём может быть дело?<div class="anchor-container"><span id="faq.license" class="anchor-target"></span> <a href="#faq.license" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Самая вероятная причина такого поведения - истёк срок лицензии. Проверьте сколько дней осталось до окончания лицензии. Количество дней до окончания лицензии можно увидеть в виджете <a href="/bot-doc/docs/interface.html#robots_table">Robots</a> в строке таблицы, соотвествующей данному роботу, в столбце <code>Days paid</code>.</p></details></li></ul> <hr> <ul><li><details><summary><i>Добавил портфель, все подключения к биржам подключены, торговля включена, но заявки по первой ноге не выставляются. В чём дело?<div class="anchor-container"><span id="faq.prompt" class="anchor-target"></span> <a href="#faq.prompt" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>При наведении на имя портфеля в списке портфелей появляется всплывающая подсказка. В ней отдельно для покупки и продажи первой ноги указывается, чего не хватает роботу для выставления заявки.
Например, строка всплывающей подсказки для продажи портфеля имеет такой вид: &quot;<code>sell: is signal=1, quantity=5, is valid market volume=1, is price check=0, is max not hedged=1, is orderbook valid=1</code>. <code>is_signal</code> означает, есть ли сигнал на покупку (т.е. либо мы сейчас котируем, либо выполняется условие на <a href="/bot-doc/docs/params-description.html#p.sell">Sell</a> и <a href="/bot-doc/docs/params-description.html#p.lim_s">Lim_Sell</a>). Если сигнал есть, то 1, иначе 0. Значения всех проверок могут быть только 0 или 1, если не указано иное. <code>quantity</code> показывает заявку какого объёма мы хотим выставить, исходя из заданных параметров портфеля. Заявка будет выставлена только при положительном значении объёма. Отрицательный объём не является ошибкой, это лишь результат расчётов. <code>is valid market volume</code> указывает прошла ли проверка на параметр <a href="/bot-doc/docs/params-description.html#p.mkt_volume">Market volume</a>. <code>is price check</code> указывает прошла ли проверка на параметр <a href="/bot-doc/docs/params-description.html#p.price_check">Price check</a>. <code>is max not hedged</code> указывает на выполнение или невыполнение условия <a href="/bot-doc/docs/params-description.html#p.max_not_hedged">Max not hedget</a> для заявок по второй ноге. <code>is orderbook valid</code> отвечает за внешние признаки валидности стакана. Если стороны стакана на покупку и продажу пересекаются, то стакан не считается валидным. Таким образом, заявка выставляется только когда все значения больше нуля.</p></details></li></ul> <hr> <ul><li><details><summary><i>Отсутствует нужный инструмент в списке инструментов биржи. Где его взять?<div class="anchor-container"><span id="faq.no_security" class="anchor-target"></span> <a href="#faq.no_security" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Список бумаг в роботе обновляется каждое утро в 6:05 по времени сервера, время сервера можно посмотреть в виджете <a href="/bot-doc/docs/interface.html#robots_table">Robots</a> в строке таблицы, соотвествующей данному роботу, в столбце <code>Robot time</code>. Чтобы выгрузить список бумаг нажмите <code>Reload security list from exchanges</code>. Если вы не видите какой-то бумаги в списке бумаг (при этом вы обновили список), а эта бумага уже есть на бирже, то либо дождитесь указанного выше времени и бумага добавится сама, либо переподключите маркет-дата подключение и после этого обновите список бумаг.</p></details></li></ul> <hr> <ul><li><details><summary><i>Сегодня на бирже были добавлены новые бумаги, но в роботе я их не вижу. Что делать?<div class="anchor-container"><span id="faq.new_security" class="anchor-target"></span> <a href="#faq.new_security" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Новые бумаги выгружаются рано утром и робот мог не успеть подгрузить их. Нужно переподключить дата подключение к бирже. Затем обновить список бумаг и новые инструменты будут доступны.</p></details></li></ul> <hr> <ul><li><details><summary><i>Добавил портфель, изменял настройки, а они не применились и портфель исчез, что происходит?<div class="anchor-container"><span id="faq.another_user" class="anchor-target"></span> <a href="#faq.another_user" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Проверьте, один ли Вы редактируете что-либо в роботе, возможно Ваш коллега делает тоже самое и вы мешаете друг другу.</p></details></li></ul> <hr> <ul><li><details><summary><i>Робот стал медленнее исполнять сделки. С чем это связано?<div class="anchor-container"><span id="faq.making deals" class="anchor-target"></span> <a href="#faq.making deals" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Робот не отвечает за исполнение заявок и за его скорость, сведение заявок в сделки выполняется биржей.
Скорость сведения заявок в сделку на бирже зависит от множества факторов, на которые робот никак не влияет и повлиять не может. Например, Вы бьете своей заявкой с количеством 1000 по противоположной стороне стакана, есть большая разница между тем, когда Ваша заявка сводится с одной встречной заявкой, в которой количество 1000 или больше, и когда Ваша заявка сводится с 1000 заявок с количеством 1 в каждой, вторая ситуация будет обрабатываться биржей дольше по понятным причинам.</p> <p>Если рассматривать ситуацию шире: с момента получения роботом цены до момента сведения заявки в сделку, то тут кроме скорости обработки роботом маркет-даты, скорости выставления заявок роботом и скорости сведения заявок в сделку биржей большую роль играет рыночная ситуация (наличие встречного предложения).</p></details></li></ul> <hr> <ul><li><details><summary><i>Почему по несколько раз выставляется объем на одинаковой раздвижке? Параметр К у меня отличен он нуля.<div class="anchor-container"><span id="faq.limits_shifting" class="anchor-target"></span> <a href="#faq.limits_shifting" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p><a href="/bot-doc/docs/params-description.html#p.sell">Sell</a> стал сильно больше <a href="/bot-doc/docs/params-description.html#p.lim_s">Lim_Sell</a>. И при подвижке на <a href="/bot-doc/docs/params-description.html#p.k">K</a> мы догоняли цену на бирже.
Пример: Вы хотите продать по 100, <code>К</code>=1. В какой то момент цена подскакивает и становится равна 105. И вы продаёте по 105, но при этом робот, по алгоритму продал по 100, затем подвинул на <code>К</code>, стал продавать по 101. Продал снова по 105, робот снова подвинул на <code>К</code>, стало 102 и снова продал по 105 и т.д.. Таким образом все эти продажи произойдут по цене 105.</p></details></li></ul> <hr> <ul><li><details><summary><i>Как уменьшить количество проскальзываний по инструментам второй ноги?<div class="anchor-container"><span id="faq.k_percent_of_quantity" class="anchor-target"></span> <a href="#faq.k_percent_of_quantity" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Для этого стоит обратить внимание на параметры <a href="/bot-doc/docs/params-description.html#s.k">k</a> и <a href="/bot-doc/docs/params-description.html#s.percent_of_quantity">Percent of quantity</a> у инструмента второй ноги в разделе <code>Securities</code>. Их настройка может существенно повлиять на исполнение заявок второй ноги.</p> <p>Увеличение значения для параметра <a href="/bot-doc/docs/params-description.html#s.k">k</a> потенциально ухудшает цену исполнения, но увеличивает саму вероятность исполнения заявки. Увеличение <a href="/bot-doc/docs/params-description.html#s.percent_of_quantity">Percent of quantity</a> поможет добиться более уверенного хеджирования, т.к. заявка по первой ноге будет выставляться только тогда, когда есть достаточно объема для хеджирования на второй ноге.</p></details></li></ul> <hr> <ul><li><details><summary><i>У меня часто выскакивает ошибка REASON_FLOOD, что делать чтобы её избежать?<div class="anchor-container"><span id="faq.reason_flood" class="anchor-target"></span> <a href="#faq.reason_flood" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p><strong>Если ошибка возникает при выставлении заявок по <a href="/bot-doc/docs/params-description.html#_5-3-11-is-first">Is first</a> инструменту:</strong></p> <p>возникновение такой ошибки, означает использование режима котирования (<a href="/bot-doc/docs/params-description.html#p.quote">Quote</a>). Можно попробовать торговать не в режиме котирования, тогда транзакции будут отправляться реже. Если без режима котирования не обойтись, то стоит обратить внимание на параметры группы &quot;Anti-spam&quot;, в частности на параметр <a href="/bot-doc/docs/params-description.html#p.delta">Delta</a>.
<a href="/bot-doc/docs/params-description.html#p.delta">Delta</a> - это отклонение <a href="/bot-doc/docs/params-description.html#p.price_s">Price_s/Price_b</a> от цены выставленной заявки, после которого заявка переставляется, то есть отправляется транзакция. Вам необходимо выставлять её таким образом, чтобы заявка не переставлялась от малейших колебаний. То есть, например, вы торгуете BTCUSD, и его стоимость 10 000. Вы ставите <a href="/bot-doc/docs/params-description.html#p.delta">Delta</a> равным единице. Какова вероятность изменения <a href="/bot-doc/docs/params-description.html#p.price_s">Price_s/Price_b</a> на доллар в случае, когда инструмент стоит 10 000 долларов? Вероятность велика, за секунду может несколько раз измениться цена на этот доллар и каждый раз робот будет отправлять приказы на удаление старой заявки и установки новой. Так и происходит спам биржи. Если поставить <a href="/bot-doc/docs/params-description.html#p.delta">Delta</a> равным 5-10, то вероятность заспамить биржу уменьшится, так как должно произойти более весомое изменение, для отправления заявок.
Настройте параметр <a href="/bot-doc/docs/params-description.html#p.mkt_volume">Market volume</a>. Если перед вами будет стоять большой объем, то особого смысла сейчас стоять нет и можно так же не спамить биржу переставлениями.<br> <strong>Важно:</strong> в режиме торговли <code>bid/offer</code> данный параметр &quot;видит&quot; только объемы бида и оффера. Это значит, что если за ними еще стоят объемы, то робот их не увидит и будет ставить заявки. Потому используйте данный параметр преимущественно в режиме <code>orderbook</code> и <code>orderbook+filter</code>.<br>
Параметр <a href="/bot-doc/docs/params-description.html#p.price_check">Price check</a>. Если <a href="/bot-doc/docs/params-description.html#p.price_s">Price_s/Price_b</a> отличается от <code>bid/offer</code> больше чем на <a href="/bot-doc/docs/params-description.html#p.price_check">Price check</a> пунктов, то не выставляемся и снова не спамим биржу. Естественно чем меньше значение, тем меньше спама.
Также можно установить большой <a href="/bot-doc/docs/params-description.html#_5-3-26-tp">TP</a>, чтобы брать реже, но больше.</p> <p><strong>Если ошибка возникает при выставлении заявок по не Is first инструментам:</strong></p> <p>Видимо, заявку по первой ноге разбирают маленькими порциями, и после каждой такой сделки происходит выставление заявок по инструментам второй ноги. Обратите внимание на параметр <a href="/bot-doc/docs/params-description.html#p.overlay">Overlay</a>, он позволяет выставлять хеджирующие заявки не после каждой сделки по первой ноге.</p></details></li></ul> <hr> <ul><li><details><summary><i>Сделки в роботе не совпадают со сделками в терминале. В чём может быть причина?<div class="anchor-container"><span id="faq.prompt" class="anchor-target"></span> <a href="#faq.prompt" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Робот не использует цены сделок в алгоритме, они нужны только для отображения клиенту. Более того, на многих подключениях нельзя получить цену конкретной сделки. По этой причине и в угоду скорости работы робот может считать ценой сделки цену выставления заявки или среднюю цену исполнения сделок по заявке. Кроме того на некоторых подключениях несколько прошедших подряд сделок могут быть учтены роботом как одна сделка, прошедшая суммарным объёмом. Такое поведение робота не является ошибочным, потери позиций при этом не происходит.</p></details></li></ul> <hr> <ul><li><details><summary><i>Я не вижу портфель, но я точно его создавал, робот не даёт мне создать новый портфель с тем же именем. В чём может быть дело?<div class="anchor-container"><span id="faq.filter" class="anchor-target"></span> <a href="#faq.filter" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Скорее всего в таблице портфелей применен фильтр и данный портфель не выбран в фильтре. Нажмите на надпись &quot;FILTER APPLIED&quot; в виджете <a href="/bot-doc/docs/interface.html#portfolios_table">Portfolios table</a> и отметьте галочкой нужный портфель.</p></details></li></ul> <hr> <ul><li><details><summary><i>Не могу создать портфель, получаю сообщение что портфель с таким именем уже существует. Я точно такой портфель не создавал. В чём может быть дело?<div class="anchor-container"><span id="faq.not_your_portfolio" class="anchor-target"></span> <a href="#faq.not_your_portfolio" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Сначала следует убедиться, что Вы действительно не создавали такой портфель, для этого проверьте фильтр портфелей, как описано <a href="#faq.filter">выше</a>. Если это не помогло, то скорее всего в роботе существует портфель с таким именем, созданный другим пользователем. Вы не можете видеть портфели, созданные другими пользователями, но при этом уникальность имён портфелей должна соблюдаться среди всех портфелей робота. Если такая ситуация наблюдается на бесплатном роботе, то это нормально, этими роботами действительно пользуется большое количество трейдеров. Если же ситуация наблюдается в боевом роботе, то уточнить торгует ли кто-то еще тем же роботом можно у старшего трейдера (Head of traders).</p></details></li></ul> <hr> <ul><li><details><summary><i>Возможно ли как-то настроить робота, чтобы он перекрывал часть Is_first ноги, если по ней набрано меньше 5 контрактов? Условно 2 набрал по первой ноге, перекрыл 3 на второй ноге (При этом сохранив Count 5 к 8)?<div class="anchor-container"><span id="faq.n_perc_fill" class="anchor-target"></span> <a href="#faq.n_perc_fill" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Вводные данные: <code>Curpos</code>=19, <code>Count</code>=5<br>
По умолчанию позиция портфеля округляется вниз до целого значения <code>Curpos</code> деленный на <code>Count</code> (главная нога), соответственно и хедж будет происходить при изменении позиции портфеля.<br>
При n_perc_fill=0, округление по модулю вниз, т.е. |19/5=3|;<br>
При n_perc_fill=80:<br>
Предположим, позиция изменилась стала Curpos=18, целая часть от деления |18/5|=3 - не изменилась,
остаток от деления =3. (100 - n_perc_fill)=100-80=20, 20% от count (т.е. от 5) =1, 80% от count =4.<br>
Остаток от деления 3 находится в диапазоне между 1 и 4, значит позиция по портфелю не меняется. Pos=3.<br>
Таким образом видно, что позиция изменится в меньшую сторону при Curpos&lt;=15 и в большую сторону при Curpos&gt;=20.</p></details></li></ul> <hr> <ul><li><details><summary><i>Как настроить уведомления о резком изменении раздвижек?<div class="anchor-container"><span id="faq.notifications" class="anchor-target"></span> <a href="#faq.notifications" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Уведомления настраиваются в настройках портфеля на вкладке <code>Notifications</code>.</p></details></li></ul> <hr> <ul><li><details><summary><i>в разделе Financial result вместо дельты часто показывается цена актива, который торгуется в портфеле. Как это влияет на Average sell and buy?<div class="anchor-container"><span id="faq.fin_res" class="anchor-target"></span> <a href="#faq.fin_res" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Расчеты ведутся на основании сделок за выбранный период для продаж и покупок отдельно, не на основании раздвижек (дельты). Соответственно, что пришло в Financial result (дельта или цена) не важно, это не влияет на подсчет Average sell and buy.</p></details></li></ul> <hr> <ul><li><details><summary><i>Какие типы заявок использует робот? Возможно ли выставление роботом рыночной заявки?<div class="anchor-container"><span id="faq.order_type" class="anchor-target"></span> <a href="#faq.order_type" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Робот использует только лимитные котировочные заявки. Выставление заявок типа &quot;рыночная&quot; невозможно, но можно имитировать такие заявки путём выставления лимитной заявки вглубь противоположной стороны стакана с помощью параметра <a href="/bot-doc/docs/params-description.html#_5-3-12-k">k</a> соответствующего инструмента в настройках портфеля в разделе <code>Securities</code>.</p></details></li></ul> <hr> <ul><li><details><summary><i>Какие действия осуществляет робот при потере соединения на одной из ног?<div class="anchor-container"><span id="faq.connection_lost" class="anchor-target"></span> <a href="#faq.connection_lost" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Зависит от того, на какой ноге и в какой момент. Если первая нога потеряла связь, портфель, в котором инструменты из биржи с потерянным соединением, перестает торговать. Если потерялась связь с второй ногой, а первая нога не успела пройти, то робот, также перестает торговать этот портфель. Если первая нога успела пройти, в этот момент вторая нога еще не встала, но успела потерять связь, то робот продолжает пытаться выставиться (рейт-лимиты конечно учитываются).</p></details></li></ul> <hr> <ul><li><details><summary><i>Надо ли оставлять страницу браузера открытой, чтобы всё продолжало работать. Что произойдёт с моими позициями, если я закрою браузер или перезагружу компьютер?<div class="anchor-container"><span id="faq.site" class="anchor-target"></span> <a href="#faq.site" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Функционирование роботов не зависит от того, открыта ли вкладка в браузере у пользователя или нет. Вы можете эту страницу закрыть, открыть в другом месте, одновременно с разных мест, перезагрузить свой компьютер и т.д., это ни на что не влияет. Роботы запущены на наших серверах и функционируют автономно. Полсе авторизации на сайте Вы получаете возможность управлять доступными Вам роботами. Есть отдельная опция - запустить робота на Вашем сервере.</p></details></li></ul> <hr> <ul><li><details><summary><i>На инструментах срочного рынка Московской биржи цены в роботе отличаются от цен в терминале. С чем это связано?<div class="anchor-container"><span id="faq.sintetic" class="anchor-target"></span> <a href="#faq.sintetic" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>На срочном рынке Московской бирже применется синтетический матчинг. Он связан с торговлей <a href="https://www.moex.com/ru/spreads" target="_blank" rel="noopener noreferrer">календарными спредами<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. При использовании синтетического матчинга сделки формируются на основе заявок, поступающих в разные стаканы связанных инструметнов (двух фьючерсов и календарного спреда). Таким образом, в процессе матчинга строится синтетика любой глубины, необходимой для сведения активных заявок. Подробно синтетический матчинг описан в разделе 2.9 документации на <a href="https://ftp.moex.com/pub/ClientsAPI/Spectra/CGate/prod/docs/p2gate_ru.pdf" target="_blank" rel="noopener noreferrer">PLAZA II шлюз<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Биржа может транслировать стакан в двух вариантах: в виде уже собранного агрегированного стакана и в виде полного списка изменения статусов всех заявок по инструменту. Во втором случае построение агрегированного стакана производится уже на стороне робота или терминала. Чаще всего в торговых терминалах используется получение готового агрегированного стакана с биржи. При трансляции агрегированного стакана биржа индикативно транслирует так же 5 уровней, сформированных синтетическими заявками. Более подробно о том, что такое синтетические индикативные котировки и как они используются в агрегированном стакане, можно прочитать в разделе 2.9.2 документации на <a href="https://ftp.moex.com/pub/ClientsAPI/Spectra/CGate/prod/docs/p2gate_ru.pdf" target="_blank" rel="noopener noreferrer">PLAZA II шлюз<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>В роботе для получения маркет-даты срочного рынка Московской биржи используются только потоки <code>Orderlog</code> подключений по протоколам <a href="/bot-doc/docs/creating-connection.html#tc.moex_fut_opt.fast">FAST</a> и <a href="/bot-doc/docs/creating-connection.html#tc.moex_fut_opt.simba">SIMBA</a> как наиболее быстрый способ получения рыночной информации, построение агрегированного стакана по инструменту проводится роботом только на основе данных по этому инструменту. Данные по связанным инструментам не используются по нескольким причинам:</p> <ul><li>У инструментов отсутствуют машиночитаемые признаки, определяющие связь с другими инструментами. Идентификация возможна только по имени инструментов.</li> <li>Достроение синтетических уровней требует получения данных по другим инструментам и занимает значительное время.</li> <li>Непонятно сколько уровней требуется достраивать. 5 уровней, достраиваемые биржей при трансляции агрегированных стаканов не отображают полной картины, которая будет построена внутри биржи лишь непосредственно в момент матчинга.</li></ul></details></li></ul> <hr> <ul><li><details><summary><i>Вижу сообщения с ошибкой выставления заявки по портфелю, они начинается со слов &quot;Stop trading!!!&quot;, но торговля по портфелю до сих пор не выключена, ошибки продолжаются. Как такое возможно?<div class="anchor-container"><span id="faq.stop_trading" class="anchor-target"></span> <a href="#faq.stop_trading" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Такое возможно при использовании формул, когда код в формулах управляет включением торговли по портфелю напрямую или через включение расписания (с помощью методов <code>set_re_sell</code>, <code>set_re_buy</code>, <code>set_use_tt</code>). При написании формул рекомендуется учитывать возможность отключения роботом торговли по портфелю при получении отпределенных ошибок выставления заявок.</p></details></li></ul> <hr> <ul><li><details><summary><i>Пришло письмо с просьбой выключить торговлю в связи с обновлением робота. Что именно я должен сделать?<div class="anchor-container"><span id="faq.robot_update" class="anchor-target"></span> <a href="#faq.robot_update" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Необходимо выключить торговлю по всем портфелям робота (например, с помощью <a href="/bot-doc/docs/getting-started.html#portfolio_actions">действий</a> виджета <a href="/bot-doc/docs/interface.html#portfolios_table">Portfolios table</a>) и убедиться, что на биржах не осталось висеть заявок, выставленных роботом. Закрывать позицию в ноль не требуется.</p> <p>С особой внимательностью при остановке торговли следует отнестись к тем портфелям, где используется <a href="/bot-doc/docs/params-description.html#p.use_tt">расписание</a> (если расписание включает торговлю, то оно должно быть отключено), и к тем портфелям, где управление установкой флагов <a href="/bot-doc/docs/params-description.html#p.re_buy">re_sell/re_buy</a> осуществляется через формулы (формулы по выбранным портфелям можно отключить вместе с выключением торговли по выбранным портфелям с помощью действия <a href="/bot-doc/docs/getting-started.html#portfolio_actions.stop_formulas">Stop formulas</a>). Не забудьте включить расписание и формулы после обновления робота.</p></details></li></ul> <hr> <ul><li><details><summary><i>Могу ли я создавать портфели и вносить изменения в существующие портфели в неторговые дни?<div class="anchor-container"><span id="faq.no_trading_days" class="anchor-target"></span> <a href="#faq.no_trading_days" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Вы можете редактировать настройки портфелей в неторговые дни. Добавление новых инструментов в портфель и создание новых портфелей не гаратируется, так как для создания нового портфеля и добавления инструментов в существующий портфель роботу необходим список инструментов. Если список был загружен роботом с биржи ранее, то Вы сможете как создать портфель, так и добавить инструменты в существующий портфель в неторговое время. Но возможны случаи, когда для проведения обновления и других работ выполняется перезапуск роботов в неторговое время, в таком случае список инструментов робот сможет загрузить только с возобновлением трансляции данных с биржи в торговые дни. Это не является ошибкой. Мы оставляем за собой право на перезапуск роботов и проведение других работ в неторговое время биржи.</p></details></li></ul> <hr> <ul><li><details><summary><i>Какие системные требования предъявляются к компьютеру, на котором будет открыт сайт с роботами?<div class="anchor-container"><span id="faq.requirements" class="anchor-target"></span> <a href="#faq.requirements" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Системные требования описаны <a href="/bot-doc/docs/introduction.html#requirements">тут</a>.</p></details></li></ul> <hr> <ul><li><details><summary><i>Возможно ли принять участие в тестировании, проводимом Московской биржей на боевом контуре в неторговый день? <div class="anchor-container"><span id="faq.moex_testing" class="anchor-target"></span> <a href="#faq.moex_testing" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Участие наших роботов в таких тестированиях не предусмотрено. Подключения к рынкам Московской Биржи автоматически отключаются в выходные дни чтобы избежать попадания тестовых данных в боевые системы, как и рекомендует сама биржа.</p> <p>Перед обновлением торговой системы на боевом контуре Московская биржа сначала развертывает новую версию торговой системы на тестовом контуре T1, там мы и тестируем работу робота с новой версией торговой системы. Таким образом, к моменту обновления боевого контура совместимость робота с новой версией торговой системой уже протестирована, и участие трейдеров в тестировании на боевом контуре не требуется.</p></details></li></ul> <hr> <ul><li><details><summary><i>Требуется ли роботу наличие подключенной опции Cancel on Disconnect в торговом подключении? <div class="anchor-container"><span id="faq.cod" class="anchor-target"></span> <a href="#faq.cod" title="Копировать ссылку" class="anchor-link">#</a></div></i></summary> <p>Многие торговые площадки и брокеры в торговых подключениях к своим площадкам предоставляют возможность использования опции <code>Cancel on Disconnect</code>. Эта опция означает, что при разрыве связи между роботом и торговой площадкой заявки, выставленные роботом, будут автоматически сняты средствами самой торговой площадки (без участия робота). Робот никак этот мехназим не использует и на его работу не полагается: при восстановлении связи с торговой площадки получаются актуальные данные по заявкам, на основе этих данных робот обновляет внутренние статусы заявок.</p> <p>С одной стороны, механизм <code>Cancel on Disconnect</code> призван устранять риски, возникающие при разрыве связи, например, при активированной опции <code>Cancel on Disconnect</code> при разрыве связи заявка по инструменту первой ноги снимется автоматически и исключит риск появления незахеджированной позиции. С другой стороны, такой механизм на торговых подключениях, используемых для выставления заявок по инструментам второй ноги, наборот может привести к тому, что при разрыве связи заявка по инструменту второй ноги снимется, после восстановления связи такая заявка заново выставлена не будет, хеджирование позиции произойдет только при настроенном параметре <a href="/bot-doc/docs/params-description.html#p.hedge_after">Hedge (sec)</a>.</p></details></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/bot-doc/docs/comparison.html" class="prev">
        12. Сравнение C++ формул и WebSocket API
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/bot-doc/assets/js/app.95e2cffb.js" defer></script><script src="/bot-doc/assets/js/2.78e0eb71.js" defer></script><script src="/bot-doc/assets/js/1.1350850d.js" defer></script><script src="/bot-doc/assets/js/33.57fcb805.js" defer></script><script src="/bot-doc/assets/js/21.7f568b35.js" defer></script>
  </body>
</html>
